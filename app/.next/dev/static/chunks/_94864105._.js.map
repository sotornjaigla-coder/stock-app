{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee17/STOCK-APP/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee17/STOCK-APP/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn(\"flex flex-col gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn(\"flex-1 outline-none\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,6LAAC,2KAAkB;QACjB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,6LAAC,2KAAkB;QACjB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee17/STOCK-APP/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,SAAS,EAChB,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,gBAAc;QACd,aAAW;QACX,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KArBS"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee17/STOCK-APP/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee17/STOCK-APP/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee17/STOCK-APP/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,oZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAhBS"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee17/STOCK-APP/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,6LAAC,gLAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,6LAAC,+KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,6LAAC;QAAa,aAAU;;0BACtB,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,qHAAE,EACX,4XACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,6LAAC,8KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,6LAAC,4MAAK;;;;;0CACN,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAhCS;AAkCT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,6LAAC,oLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 576, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee17/STOCK-APP/lib/store.ts"],"sourcesContent":["export type Product = {\r\n  id: string;\r\n  barcode?: string;\r\n  sku: string;\r\n  name: string;\r\n  category?: string;\r\n  unit: string;\r\n  cost: number; // ต้นทุน\r\n  price: number; // ราคาขาย\r\n  stock: number;\r\n  minStock: number;\r\n  image?: string; // base64 ได้\r\n  isActive: boolean;\r\n};\r\n\r\nexport type Supplier = {\r\n  id: string;\r\n  name: string;\r\n  phone?: string;\r\n};\r\n\r\nexport type TxType = \"PURCHASE_IN\" | \"SALE_OUT\" | \"ADJUST\";\r\n\r\nexport type StockLedger = {\r\n  id: string;\r\n  productId: string;\r\n  type: TxType;\r\n  qty: number;\r\n  beforeStock: number;\r\n  afterStock: number;\r\n  refType?: \"SALE\" | \"PO\" | \"ADJUST\";\r\n  refId?: string;\r\n  at: number;\r\n};\r\n\r\nexport type Sale = {\r\n  id: string;\r\n  createdAt: number;\r\n  paymentType: \"cash\" | \"transfer\" | \"promptpay\";\r\n  discount: number;\r\n  total: number;\r\n};\r\n\r\nexport type SaleItem = {\r\n  id: string;\r\n  saleId: string;\r\n  productId: string;\r\n  nameAtSale: string;\r\n  priceAtSale: number;\r\n  costAtSale: number;\r\n  qty: number;\r\n  lineTotal: number;\r\n};\r\n\r\nconst KEY_PRODUCTS = \"mm_products_v1\";\r\nconst KEY_LEDGER = \"mm_ledger_v1\";\r\nconst KEY_SALES = \"mm_sales_v1\";\r\nconst KEY_SALE_ITEMS = \"mm_sale_items_v1\";\r\n\r\nfunction safeParse<T>(raw: string | null, fallback: T): T {\r\n  if (!raw) return fallback;\r\n  try {\r\n    return JSON.parse(raw) as T;\r\n  } catch {\r\n    return fallback;\r\n  }\r\n}\r\n\r\nexport function loadProducts(): Product[] {\r\n  if (typeof window === \"undefined\") return [];\r\n  return safeParse<Product[]>(localStorage.getItem(KEY_PRODUCTS), []);\r\n}\r\n\r\nexport function saveProducts(products: Product[]) {\r\n  if (typeof window === \"undefined\") return;\r\n  localStorage.setItem(KEY_PRODUCTS, JSON.stringify(products));\r\n}\r\n\r\nexport function loadLedger(): StockLedger[] {\r\n  if (typeof window === \"undefined\") return [];\r\n  return safeParse<StockLedger[]>(localStorage.getItem(KEY_LEDGER), []);\r\n}\r\n\r\nexport function saveLedger(rows: StockLedger[]) {\r\n  if (typeof window === \"undefined\") return;\r\n  localStorage.setItem(KEY_LEDGER, JSON.stringify(rows));\r\n}\r\n\r\nexport function loadSales(): Sale[] {\r\n  if (typeof window === \"undefined\") return [];\r\n  return safeParse<Sale[]>(localStorage.getItem(KEY_SALES), []);\r\n}\r\n\r\nexport function saveSales(rows: Sale[]) {\r\n  if (typeof window === \"undefined\") return;\r\n  localStorage.setItem(KEY_SALES, JSON.stringify(rows));\r\n}\r\n\r\nexport function loadSaleItems(): SaleItem[] {\r\n  if (typeof window === \"undefined\") return [];\r\n  return safeParse<SaleItem[]>(localStorage.getItem(KEY_SALE_ITEMS), []);\r\n}\r\n\r\nexport function saveSaleItems(rows: SaleItem[]) {\r\n  if (typeof window === \"undefined\") return;\r\n  localStorage.setItem(KEY_SALE_ITEMS, JSON.stringify(rows));\r\n}\r\n\r\nexport function seedIfEmpty() {\r\n  const products = loadProducts();\r\n  if (products.length > 0) return;\r\n\r\n  const seeded: Product[] = [\r\n    {\r\n      id: crypto.randomUUID(),\r\n      barcode: \"8850001112223\",\r\n      sku: \"P001\",\r\n      name: \"น้ำดื่ม 600ml\",\r\n      category: \"เครื่องดื่ม\",\r\n      unit: \"ขวด\",\r\n      cost: 5,\r\n      price: 10,\r\n      stock: 50,\r\n      minStock: 10,\r\n      isActive: true,\r\n    },\r\n    {\r\n      id: crypto.randomUUID(),\r\n      barcode: \"8850003334445\",\r\n      sku: \"P002\",\r\n      name: \"มาม่าต้มยำกุ้ง\",\r\n      category: \"อาหารแห้ง\",\r\n      unit: \"ซอง\",\r\n      cost: 4,\r\n      price: 7,\r\n      stock: 80,\r\n      minStock: 20,\r\n      isActive: true,\r\n    },\r\n    {\r\n      id: crypto.randomUUID(),\r\n      barcode: \"8850007778889\",\r\n      sku: \"P003\",\r\n      name: \"โค้กกระป๋อง\",\r\n      category: \"เครื่องดื่ม\",\r\n      unit: \"กระป๋อง\",\r\n      cost: 10,\r\n      price: 15,\r\n      stock: 30,\r\n      minStock: 10,\r\n      isActive: true,\r\n    },\r\n  ];\r\n\r\n  saveProducts(seeded);\r\n}\r\n\r\nexport function addProduct(p: Omit<Product, \"id\" | \"stock\"> & { stock?: number }) {\r\n  const products = loadProducts();\r\n  const next: Product = {\r\n    id: crypto.randomUUID(),\r\n    stock: p.stock ?? 0,\r\n    ...p,\r\n  };\r\n  saveProducts([next, ...products]);\r\n}\r\n\r\nexport function deleteProduct(id: string) {\r\n  const products = loadProducts();\r\n  saveProducts(products.filter((p) => p.id !== id));\r\n}\r\n\r\nexport function adjustStock(productId: string, qtyDelta: number, reason: TxType = \"ADJUST\") {\r\n  const products = loadProducts();\r\n  const idx = products.findIndex((p) => p.id === productId);\r\n  if (idx === -1) return;\r\n\r\n  const before = products[idx].stock;\r\n  const after = Math.max(0, before + qtyDelta);\r\n  products[idx] = { ...products[idx], stock: after };\r\n  saveProducts(products);\r\n\r\n  const ledger = loadLedger();\r\n  ledger.unshift({\r\n    id: crypto.randomUUID(),\r\n    productId,\r\n    type: reason,\r\n    qty: Math.abs(qtyDelta),\r\n    beforeStock: before,\r\n    afterStock: after,\r\n    refType: \"ADJUST\",\r\n    refId: undefined,\r\n    at: Date.now(),\r\n  });\r\n  saveLedger(ledger);\r\n}\r\n\r\nexport function findProductByBarcode(barcode: string): Product | undefined {\r\n  const products = loadProducts();\r\n  return products.find((p) => p.barcode === barcode && p.isActive);\r\n}\r\n\r\nexport type CartItem = {\r\n  productId: string;\r\n  name: string;\r\n  price: number;\r\n  cost: number;\r\n  qty: number;\r\n};\r\n\r\nexport function checkoutSale(args: {\r\n  cart: CartItem[];\r\n  paymentType: Sale[\"paymentType\"];\r\n  discount: number;\r\n}) {\r\n  const { cart, paymentType, discount } = args;\r\n\r\n  if (cart.length === 0) throw new Error(\"Cart is empty\");\r\n\r\n  const products = loadProducts();\r\n\r\n  // Validate stock\r\n  for (const item of cart) {\r\n    const p = products.find((x) => x.id === item.productId);\r\n    if (!p) throw new Error(\"Product not found\");\r\n    if (p.stock < item.qty) throw new Error(`Stock not enough: ${p.name}`);\r\n  }\r\n\r\n  const saleId = crypto.randomUUID();\r\n  const subtotal = cart.reduce((sum, i) => sum + i.price * i.qty, 0);\r\n  const total = Math.max(0, subtotal - discount);\r\n\r\n  const sale: Sale = {\r\n    id: saleId,\r\n    createdAt: Date.now(),\r\n    paymentType,\r\n    discount,\r\n    total,\r\n  };\r\n\r\n  const saleItems: SaleItem[] = cart.map((i) => ({\r\n    id: crypto.randomUUID(),\r\n    saleId,\r\n    productId: i.productId,\r\n    nameAtSale: i.name,\r\n    priceAtSale: i.price,\r\n    costAtSale: i.cost,\r\n    qty: i.qty,\r\n    lineTotal: i.price * i.qty,\r\n  }));\r\n\r\n  // Update stock + ledger\r\n  const ledger = loadLedger();\r\n  for (const item of cart) {\r\n    const idx = products.findIndex((p) => p.id === item.productId);\r\n    const before = products[idx].stock;\r\n    const after = before - item.qty;\r\n    products[idx] = { ...products[idx], stock: after };\r\n\r\n    ledger.unshift({\r\n      id: crypto.randomUUID(),\r\n      productId: item.productId,\r\n      type: \"SALE_OUT\",\r\n      qty: item.qty,\r\n      beforeStock: before,\r\n      afterStock: after,\r\n      refType: \"SALE\",\r\n      refId: saleId,\r\n      at: Date.now(),\r\n    });\r\n  }\r\n\r\n  saveProducts(products);\r\n  saveLedger(ledger);\r\n\r\n  const sales = loadSales();\r\n  sales.unshift(sale);\r\n  saveSales(sales);\r\n\r\n  const allSaleItems = loadSaleItems();\r\n  saveSaleItems([...saleItems, ...allSaleItems]);\r\n\r\n  return { sale, saleItems };\r\n}\r\n\r\nexport function getTodaySummary() {\r\n  const now = new Date();\r\n  const start = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\r\n  const end = start + 24 * 60 * 60 * 1000;\r\n\r\n  const sales = loadSales().filter((s) => s.createdAt >= start && s.createdAt < end);\r\n  const saleItems = loadSaleItems();\r\n\r\n  const totalSales = sales.reduce((sum, s) => sum + s.total, 0);\r\n  const totalBills = sales.length;\r\n\r\n  const grossProfit = sales.reduce((sum, s) => {\r\n    const items = saleItems.filter((i) => i.saleId === s.id);\r\n    const gp = items.reduce((acc, it) => acc + (it.priceAtSale - it.costAtSale) * it.qty, 0);\r\n    return sum + gp;\r\n  }, 0);\r\n\r\n  return { totalSales, totalBills, grossProfit };\r\n}\r\n\r\nexport function getLowStockProducts() {\r\n  const products = loadProducts();\r\n  return products.filter((p) => p.isActive && p.stock <= p.minStock);\r\n}\r\nexport function exportSalesCSV() {\r\n  const sales = loadSales();\r\n  const items = loadSaleItems();\r\n\r\n  const header = [\r\n    \"saleId\",\r\n    \"createdAt\",\r\n    \"paymentType\",\r\n    \"discount\",\r\n    \"total\",\r\n    \"productName\",\r\n    \"qty\",\r\n    \"priceAtSale\",\r\n    \"lineTotal\",\r\n  ].join(\",\");\r\n\r\n  const rows: string[] = [header];\r\n\r\n  for (const s of sales) {\r\n    const it = items.filter((x) => x.saleId === s.id);\r\n    for (const row of it) {\r\n      rows.push(\r\n        [\r\n          s.id,\r\n          new Date(s.createdAt).toISOString(),\r\n          s.paymentType,\r\n          s.discount,\r\n          s.total,\r\n          `\"${row.nameAtSale.replace(/\"/g, '\"\"')}\"`,\r\n          row.qty,\r\n          row.priceAtSale,\r\n          row.lineTotal,\r\n        ].join(\",\")\r\n      );\r\n    }\r\n  }\r\n\r\n  return rows.join(\"\\n\");\r\n}\r\nexport function getActiveProducts() {\r\n  return loadProducts().filter((p) => p.isActive);\r\n}\r\n// ==============================\r\n// ✅ BACKOFFICE FEATURES\r\n// ==============================\r\n\r\nexport type GRN = {\r\n  id: string;\r\n  docNo: string; // GRN-2026-0001\r\n  supplierName?: string;\r\n  createdAt: number;\r\n  note?: string;\r\n  items: GRNItem[];\r\n  totalCost: number;\r\n};\r\n\r\nexport type GRNItem = {\r\n  productId: string;\r\n  name: string;\r\n  qty: number;\r\n  cost: number;\r\n  lineTotal: number;\r\n};\r\n\r\nexport type AdjustmentReason =\r\n  | \"DAMAGED\"\r\n  | \"LOST\"\r\n  | \"EXPIRED\"\r\n  | \"COUNT_DIFF\"\r\n  | \"SYSTEM_FIX\"\r\n  | \"OTHER\";\r\n\r\nexport type AdjustmentDoc = {\r\n  id: string;\r\n  createdAt: number;\r\n  reason: AdjustmentReason;\r\n  note?: string;\r\n  items: AdjustmentItem[];\r\n};\r\n\r\nexport type AdjustmentItem = {\r\n  productId: string;\r\n  name: string;\r\n  beforeStock: number;\r\n  afterStock: number;\r\n  diff: number;\r\n};\r\n\r\nexport type CountSession = {\r\n  id: string;\r\n  docNo: string; // COUNT-2026-0001\r\n  createdAt: number;\r\n  status: \"DRAFT\" | \"POSTED\";\r\n  note?: string;\r\n  rows: CountRow[];\r\n};\r\n\r\nexport type CountRow = {\r\n  productId: string;\r\n  name: string;\r\n  systemStock: number;\r\n  countedStock: number;\r\n  diff: number;\r\n};\r\n\r\nconst KEY_GRNS = \"mm_grn_v1\";\r\nconst KEY_ADJUST_DOCS = \"mm_adjust_docs_v1\";\r\nconst KEY_COUNTS = \"mm_count_sessions_v1\";\r\nexport function loadGRNs(): GRN[] {\r\n  if (typeof window === \"undefined\") return [];\r\n  return safeParse<GRN[]>(localStorage.getItem(KEY_GRNS), []);\r\n}\r\nexport function saveGRNs(rows: GRN[]) {\r\n  if (typeof window === \"undefined\") return;\r\n  localStorage.setItem(KEY_GRNS, JSON.stringify(rows));\r\n}\r\n\r\nexport function loadAdjustmentDocs(): AdjustmentDoc[] {\r\n  if (typeof window === \"undefined\") return [];\r\n  return safeParse<AdjustmentDoc[]>(localStorage.getItem(KEY_ADJUST_DOCS), []);\r\n}\r\nexport function saveAdjustmentDocs(rows: AdjustmentDoc[]) {\r\n  if (typeof window === \"undefined\") return;\r\n  localStorage.setItem(KEY_ADJUST_DOCS, JSON.stringify(rows));\r\n}\r\n\r\nexport function loadCountSessions(): CountSession[] {\r\n  if (typeof window === \"undefined\") return [];\r\n  return safeParse<CountSession[]>(localStorage.getItem(KEY_COUNTS), []);\r\n}\r\nexport function saveCountSessions(rows: CountSession[]) {\r\n  if (typeof window === \"undefined\") return;\r\n  localStorage.setItem(KEY_COUNTS, JSON.stringify(rows));\r\n}\r\nfunction pad4(n: number) {\r\n  return String(n).padStart(4, \"0\");\r\n}\r\n\r\nfunction nextDocNo(prefix: string, existing: { docNo: string }[]) {\r\n  const year = new Date().getFullYear();\r\n  const start = `${prefix}-${year}-`;\r\n  const nums = existing\r\n    .filter((x) => x.docNo.startsWith(start))\r\n    .map((x) => Number(x.docNo.replace(start, \"\")))\r\n    .filter((n) => Number.isFinite(n));\r\n  const next = (nums.length ? Math.max(...nums) : 0) + 1;\r\n  return `${prefix}-${year}-${pad4(next)}`;\r\n}\r\nexport function createGRN(args: {\r\n  supplierName?: string;\r\n  note?: string;\r\n  items: { productId: string; qty: number; cost: number }[];\r\n}) {\r\n  const products = loadProducts();\r\n  const grns = loadGRNs();\r\n\r\n  const docNo = nextDocNo(\"GRN\", grns);\r\n  const id = crypto.randomUUID();\r\n\r\n  let totalCost = 0;\r\n\r\n  const grnItems: GRNItem[] = args.items.map((it) => {\r\n    const p = products.find((x) => x.id === it.productId);\r\n    if (!p) throw new Error(\"Product not found\");\r\n\r\n    const lineTotal = it.qty * it.cost;\r\n    totalCost += lineTotal;\r\n\r\n    return {\r\n      productId: it.productId,\r\n      name: p.name,\r\n      qty: it.qty,\r\n      cost: it.cost,\r\n      lineTotal,\r\n    };\r\n  });\r\n\r\n  // update stock + ledger\r\n  const ledger = loadLedger();\r\n  for (const it of grnItems) {\r\n    const idx = products.findIndex((p) => p.id === it.productId);\r\n    const before = products[idx].stock;\r\n    const after = before + it.qty;\r\n\r\n    // update stock\r\n    products[idx] = { ...products[idx], stock: after, cost: it.cost }; // update cost ล่าสุด\r\n\r\n    ledger.unshift({\r\n      id: crypto.randomUUID(),\r\n      productId: it.productId,\r\n      type: \"PURCHASE_IN\",\r\n      qty: it.qty,\r\n      beforeStock: before,\r\n      afterStock: after,\r\n      refType: \"PO\",\r\n      refId: id,\r\n      at: Date.now(),\r\n    });\r\n  }\r\n\r\n  saveProducts(products);\r\n  saveLedger(ledger);\r\n\r\n  const grn: GRN = {\r\n    id,\r\n    docNo,\r\n    supplierName: args.supplierName,\r\n    createdAt: Date.now(),\r\n    note: args.note,\r\n    items: grnItems,\r\n    totalCost,\r\n  };\r\n\r\n  grns.unshift(grn);\r\n  saveGRNs(grns);\r\n\r\n  return grn;\r\n}\r\nexport function createAdjustment(args: {\r\n  reason: AdjustmentReason;\r\n  note?: string;\r\n  items: { productId: string; afterStock: number }[];\r\n}) {\r\n  const products = loadProducts();\r\n  const ledger = loadLedger();\r\n\r\n  const doc: AdjustmentDoc = {\r\n    id: crypto.randomUUID(),\r\n    createdAt: Date.now(),\r\n    reason: args.reason,\r\n    note: args.note,\r\n    items: [],\r\n  };\r\n\r\n  for (const it of args.items) {\r\n    const idx = products.findIndex((p) => p.id === it.productId);\r\n    if (idx === -1) continue;\r\n\r\n    const before = products[idx].stock;\r\n    const after = Math.max(0, it.afterStock);\r\n    const diff = after - before;\r\n\r\n    products[idx] = { ...products[idx], stock: after };\r\n\r\n    doc.items.push({\r\n      productId: it.productId,\r\n      name: products[idx].name,\r\n      beforeStock: before,\r\n      afterStock: after,\r\n      diff,\r\n    });\r\n\r\n    if (diff !== 0) {\r\n      ledger.unshift({\r\n        id: crypto.randomUUID(),\r\n        productId: it.productId,\r\n        type: \"ADJUST\",\r\n        qty: Math.abs(diff),\r\n        beforeStock: before,\r\n        afterStock: after,\r\n        refType: \"ADJUST\",\r\n        refId: doc.id,\r\n        at: Date.now(),\r\n      });\r\n    }\r\n  }\r\n\r\n  saveProducts(products);\r\n  saveLedger(ledger);\r\n\r\n  const docs = loadAdjustmentDocs();\r\n  docs.unshift(doc);\r\n  saveAdjustmentDocs(docs);\r\n\r\n  return doc;\r\n}\r\nexport function createCountSession(note?: string) {\r\n  const sessions = loadCountSessions();\r\n  const docNo = nextDocNo(\"COUNT\", sessions);\r\n\r\n  const products = loadProducts().filter((p) => p.isActive);\r\n\r\n  const session: CountSession = {\r\n    id: crypto.randomUUID(),\r\n    docNo,\r\n    createdAt: Date.now(),\r\n    status: \"DRAFT\",\r\n    note,\r\n    rows: products.map((p) => ({\r\n      productId: p.id,\r\n      name: p.name,\r\n      systemStock: p.stock,\r\n      countedStock: p.stock,\r\n      diff: 0,\r\n    })),\r\n  };\r\n\r\n  sessions.unshift(session);\r\n  saveCountSessions(sessions);\r\n\r\n  return session;\r\n}\r\n\r\nexport function updateCountRow(sessionId: string, productId: string, countedStock: number) {\r\n  const sessions = loadCountSessions();\r\n  const idx = sessions.findIndex((s) => s.id === sessionId);\r\n  if (idx === -1) return;\r\n\r\n  const s = sessions[idx];\r\n  if (s.status !== \"DRAFT\") return;\r\n\r\n  s.rows = s.rows.map((r) => {\r\n    if (r.productId !== productId) return r;\r\n    const counted = Math.max(0, countedStock);\r\n    const diff = counted - r.systemStock;\r\n    return { ...r, countedStock: counted, diff };\r\n  });\r\n\r\n  sessions[idx] = s;\r\n  saveCountSessions(sessions);\r\n}\r\n\r\nexport function postCountSession(sessionId: string) {\r\n  const sessions = loadCountSessions();\r\n  const idx = sessions.findIndex((s) => s.id === sessionId);\r\n  if (idx === -1) throw new Error(\"Count session not found\");\r\n\r\n  const session = sessions[idx];\r\n  if (session.status !== \"DRAFT\") throw new Error(\"Already posted\");\r\n\r\n  // ทำ adjustment ตาม diff\r\n  const adjustmentItems = session.rows\r\n    .filter((r) => r.diff !== 0)\r\n    .map((r) => ({\r\n      productId: r.productId,\r\n      afterStock: r.countedStock,\r\n    }));\r\n\r\n  if (adjustmentItems.length > 0) {\r\n    createAdjustment({\r\n      reason: \"COUNT_DIFF\",\r\n      note: `Cycle Count ${session.docNo}`,\r\n      items: adjustmentItems,\r\n    });\r\n  }\r\n\r\n  session.status = \"POSTED\";\r\n  sessions[idx] = session;\r\n  saveCountSessions(sessions);\r\n\r\n  return session;\r\n}\r\nexport function exportProductsCSV() {\r\n  const rows = loadProducts();\r\n  const header = [\r\n    \"sku\",\r\n    \"barcode\",\r\n    \"name\",\r\n    \"category\",\r\n    \"unit\",\r\n    \"cost\",\r\n    \"price\",\r\n    \"stock\",\r\n    \"minStock\",\r\n    \"isActive\",\r\n  ].join(\",\");\r\n\r\n  const lines = [header];\r\n\r\n  for (const p of rows) {\r\n    lines.push(\r\n      [\r\n        p.sku,\r\n        p.barcode ?? \"\",\r\n        `\"${p.name.replace(/\"/g, '\"\"')}\"`,\r\n        p.category ?? \"\",\r\n        p.unit,\r\n        p.cost,\r\n        p.price,\r\n        p.stock,\r\n        p.minStock,\r\n        p.isActive ? \"1\" : \"0\",\r\n      ].join(\",\")\r\n    );\r\n  }\r\n  return lines.join(\"\\n\");\r\n}\r\n\r\nexport function importProductsCSV(csv: string) {\r\n  const lines = csv.split(/\\r?\\n/).filter((x) => x.trim());\r\n  if (lines.length <= 1) return;\r\n\r\n  const [header, ...rows] = lines;\r\n  const cols = header.split(\",\").map((x) => x.trim());\r\n\r\n  const get = (arr: string[], key: string) => {\r\n    const i = cols.indexOf(key);\r\n    return i >= 0 ? (arr[i] ?? \"\").trim() : \"\";\r\n  };\r\n\r\n  const products = loadProducts();\r\n\r\n  for (const line of rows) {\r\n    const arr = line.split(\",\"); // NOTE: csv แบบง่าย ไม่รองรับ comma ในชื่อ (เรา quote ชื่อไว้แล้ว)\r\n\r\n    const sku = get(arr, \"sku\");\r\n    const name = get(arr, \"name\").replace(/^\"|\"$/g, \"\");\r\n    if (!sku || !name) continue;\r\n\r\n    const barcode = get(arr, \"barcode\") || undefined;\r\n\r\n    const next: Product = {\r\n      id: crypto.randomUUID(),\r\n      sku,\r\n      barcode,\r\n      name,\r\n      category: get(arr, \"category\") || \"ทั่วไป\",\r\n      unit: get(arr, \"unit\") || \"ชิ้น\",\r\n      cost: Number(get(arr, \"cost\") || 0),\r\n      price: Number(get(arr, \"price\") || 0),\r\n      stock: Number(get(arr, \"stock\") || 0),\r\n      minStock: Number(get(arr, \"minStock\") || 0),\r\n      image: undefined,\r\n      isActive: get(arr, \"isActive\") !== \"0\",\r\n    };\r\n\r\n    products.unshift(next);\r\n  }\r\n\r\n  saveProducts(products);\r\n}\r\nexport function getStockValuation() {\r\n  const products = loadProducts().filter((p) => p.isActive);\r\n\r\n  const rows = products.map((p) => ({\r\n    id: p.id,\r\n    name: p.name,\r\n    sku: p.sku,\r\n    stock: p.stock,\r\n    cost: p.cost,\r\n    value: p.stock * p.cost,\r\n  }));\r\n\r\n  const totalValue = rows.reduce((sum, r) => sum + r.value, 0);\r\n\r\n  return { rows, totalValue };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1216, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee17/STOCK-APP/app/pos/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\n\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\n\r\nimport {\r\n  CartItem,\r\n  checkoutSale,\r\n  findProductByBarcode,\r\n  loadProducts,\r\n  Product,\r\n  seedIfEmpty,\r\n} from \"@/lib/store\";\r\n\r\nexport default function POSPage() {\r\n  const [barcode, setBarcode] = useState(\"\");\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [cart, setCart] = useState<CartItem[]>([]);\r\n  const [discount, setDiscount] = useState(0);\r\n\r\n  // ✅ เหลือแค่นี้\r\n  const [paymentType, setPaymentType] = useState<\"cash\" | \"promptpay\">(\"cash\");\r\n\r\n  const [search, setSearch] = useState(\"\");\r\n  const searchParams = useSearchParams();\r\n  const addedRef = useRef<string | null>(null);\r\n\r\n\r\n  // ✅ popup สวยๆแทน alert\r\n  const [successOpen, setSuccessOpen] = useState(false);\r\n  const [lastBill, setLastBill] = useState<{\r\n    billNo: string;\r\n    total: number;\r\n    payment: \"cash\" | \"promptpay\";\r\n  } | null>(null);\r\n\r\n  useEffect(() => {\r\n    seedIfEmpty();\r\n    setProducts(loadProducts());\r\n  }, []);\r\n\r\n  const subtotal = useMemo(\r\n    () => cart.reduce((sum, i) => sum + i.price * i.qty, 0),\r\n    [cart]\r\n  );\r\n\r\n  const total = useMemo(\r\n    () => Math.max(0, subtotal - discount),\r\n    [subtotal, discount]\r\n  );\r\n\r\n  const addToCart = (p: Product) => {\r\n    setCart((prev) => {\r\n      const idx = prev.findIndex((x) => x.productId === p.id);\r\n      if (idx >= 0) {\r\n        const next = [...prev];\r\n        next[idx] = { ...next[idx], qty: next[idx].qty + 1 };\r\n        return next;\r\n      }\r\n      return [\r\n        ...prev,\r\n        {\r\n          productId: p.id,\r\n          name: p.name,\r\n          price: p.price,\r\n          cost: p.cost,\r\n          qty: 1,\r\n        },\r\n      ];\r\n    });\r\n  };\r\n\r\n  // ✅ Dashboard คลิกสินค้า → /pos?add=<productId> → Auto add\r\nuseEffect(() => {\r\n  const addId = searchParams.get(\"add\");\r\n  if (!addId) return;\r\n\r\n  // ✅ กัน StrictMode rerender/add ซ้ำ\r\n  if (addedRef.current === addId) return;\r\n  addedRef.current = addId;\r\n\r\n  const p = loadProducts().find((x) => x.id === addId && x.isActive);\r\n  if (!p) return;\r\n\r\n  addToCart(p);\r\n\r\n  // ✅ ลบ query ทิ้งกัน refresh แล้วเพิ่มอีก\r\n  const url = new URL(window.location.href);\r\n  url.searchParams.delete(\"add\");\r\n  window.history.replaceState({}, \"\", url.toString());\r\n}, [searchParams, products]);\r\n\r\n\r\n  const addByBarcode = () => {\r\n    const code = barcode.trim();\r\n    if (!code) return;\r\n\r\n    const p = findProductByBarcode(code);\r\n    if (!p) {\r\n      alert(\"ไม่พบสินค้าจากบาร์โค้ดนี้\");\r\n      return;\r\n    }\r\n\r\n    addToCart(p);\r\n    setBarcode(\"\");\r\n  };\r\n\r\n  const filtered = useMemo(() => {\r\n    const k = search.trim().toLowerCase();\r\n    return products\r\n      .filter((p) => p.isActive)\r\n      .filter(\r\n        (p) =>\r\n          !k ||\r\n          p.name.toLowerCase().includes(k) ||\r\n          p.sku.toLowerCase().includes(k)\r\n      );\r\n  }, [products, search]);\r\n\r\n  const checkout = () => {\r\n    try {\r\n      const res = checkoutSale({\r\n        cart,\r\n        paymentType,\r\n        discount: Number(discount) || 0,\r\n      });\r\n\r\n      // ✅ เปิด popup สวยๆ\r\n      setLastBill({\r\n        billNo: res.sale.id.slice(0, 8),\r\n        total: res.sale.total,\r\n        payment: res.sale.paymentType as \"cash\" | \"promptpay\",\r\n      });\r\n      setSuccessOpen(true);\r\n\r\n      // reset\r\n      setCart([]);\r\n      setDiscount(0);\r\n\r\n      // refresh stock\r\n      setProducts(loadProducts());\r\n    } catch (err: any) {\r\n      alert(err.message || \"Checkout failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* ✅ POPUP ชำระเงินสำเร็จ */}\r\n      <Dialog open={successOpen} onOpenChange={setSuccessOpen}>\r\n        <DialogContent className=\"rounded-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-green-600\">\r\n              ✅ ชำระเงินสำเร็จ\r\n            </DialogTitle>\r\n          </DialogHeader>\r\n\r\n          {lastBill && (\r\n            <div className=\"space-y-3 text-sm\">\r\n              <div className=\"rounded-xl border bg-white p-3\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-slate-500\">เลขบิล</span>\r\n                  <span className=\"font-semibold\">{lastBill.billNo}</span>\r\n                </div>\r\n\r\n                <div className=\"mt-2 flex justify-between\">\r\n                  <span className=\"text-slate-500\">ยอดรวม</span>\r\n                  <span className=\"text-base font-bold\">{lastBill.total}</span>\r\n                </div>\r\n\r\n                <div className=\"mt-2 flex justify-between\">\r\n                  <span className=\"text-slate-500\">วิธีชำระ</span>\r\n                  <span className=\"font-semibold\">\r\n                    {lastBill.payment === \"cash\" ? \"เงินสด\" : \"PromptPay\"}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-2\">\r\n                <Button\r\n                  className=\"w-full rounded-xl\"\r\n                  onClick={() => window.print()}\r\n                >\r\n                  พิมพ์ใบเสร็จ\r\n                </Button>\r\n\r\n                <Button\r\n                  variant=\"secondary\"\r\n                  className=\"w-full rounded-xl\"\r\n                  onClick={() => setSuccessOpen(false)}\r\n                >\r\n                  ปิด\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* HEADER */}\r\n      <div className=\"flex items-end justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">POS (ขายหน้าร้าน)</h1>\r\n          <p className=\"text-sm text-slate-500\">\r\n            ยิงบาร์โค้ด/QR หรือกดเลือกจากรายการสินค้า\r\n          </p>\r\n        </div>\r\n        <Badge variant=\"secondary\">2 modes</Badge>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\r\n        {/* LEFT */}\r\n        <Card className=\"rounded-2xl\">\r\n          <CardContent className=\"space-y-4 p-4\">\r\n            <Tabs defaultValue=\"scan\">\r\n              <TabsList className=\"w-full\">\r\n                <TabsTrigger className=\"flex-1\" value=\"scan\">\r\n                  ยิงบาร์โค้ด/QR\r\n                </TabsTrigger>\r\n                <TabsTrigger className=\"flex-1\" value=\"pick\">\r\n                  เลือกจากรูปสินค้า\r\n                </TabsTrigger>\r\n              </TabsList>\r\n\r\n              <TabsContent value=\"scan\" className=\"space-y-3\">\r\n                <div className=\"text-sm font-semibold\">ยิงบาร์โค้ด</div>\r\n                <div className=\"flex gap-2\">\r\n                  <Input\r\n                    placeholder=\"เช่น 8850001112223\"\r\n                    value={barcode}\r\n                    onChange={(e) => setBarcode(e.target.value)}\r\n                    onKeyDown={(e) => e.key === \"Enter\" && addByBarcode()}\r\n                  />\r\n                  <Button onClick={addByBarcode}>เพิ่ม</Button>\r\n                </div>\r\n                <div className=\"text-xs text-slate-500\">\r\n                  ทดสอบ: 8850001112223 / 8850003334445 / 8850007778889\r\n                </div>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"pick\" className=\"space-y-3\">\r\n                <div className=\"text-sm font-semibold\">เลือกสินค้า</div>\r\n                <Input\r\n                  placeholder=\"ค้นหาชื่อ / SKU\"\r\n                  value={search}\r\n                  onChange={(e) => setSearch(e.target.value)}\r\n                />\r\n\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  {filtered.slice(0, 12).map((p) => (\r\n                    <button\r\n                      key={p.id}\r\n                      onClick={() => addToCart(p)}\r\n                      className=\"rounded-2xl border bg-white p-2 text-left hover:bg-slate-50\"\r\n                    >\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"relative h-12 w-12 overflow-hidden rounded-xl border bg-white\">\r\n                          {p.image ? (\r\n                            <Image\r\n                              src={p.image}\r\n                              alt={p.name}\r\n                              fill\r\n                              className=\"object-cover\"\r\n                            />\r\n                          ) : (\r\n                            <div className=\"flex h-full w-full items-center justify-center text-[10px] text-slate-400\">\r\n                              No image\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"min-w-0\">\r\n                          <div className=\"truncate text-sm font-semibold\">\r\n                            {p.name}\r\n                          </div>\r\n                          <div className=\"text-xs text-slate-500\">\r\n                            ฿{p.price} | เหลือ {p.stock}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"text-xs text-slate-500\">\r\n                  * แสดง 12 ชิ้นแรก (ค่อยเพิ่ม pagination ทีหลัง)\r\n                </div>\r\n              </TabsContent>\r\n            </Tabs>\r\n\r\n            {/* CART */}\r\n            <div className=\"text-sm font-semibold\">ตะกร้าสินค้า</div>\r\n\r\n            <div className=\"space-y-2\">\r\n              {cart.map((i) => (\r\n                <div\r\n                  key={i.productId}\r\n                  className=\"flex items-center justify-between rounded-xl border bg-white p-3\"\r\n                >\r\n                  <div>\r\n                    <div className=\"font-medium\">{i.name}</div>\r\n                    <div className=\"text-xs text-slate-500\">\r\n                      {i.price} x {i.qty} = {i.price * i.qty}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Button\r\n                      variant=\"secondary\"\r\n                      onClick={() =>\r\n                        setCart((prev) =>\r\n                          prev.map((x) =>\r\n                            x.productId === i.productId\r\n                              ? { ...x, qty: Math.max(1, x.qty - 1) }\r\n                              : x\r\n                          )\r\n                        )\r\n                      }\r\n                    >\r\n                      -\r\n                    </Button>\r\n\r\n                    <div className=\"w-6 text-center text-sm font-semibold\">\r\n                      {i.qty}\r\n                    </div>\r\n\r\n                    <Button\r\n                      variant=\"secondary\"\r\n                      onClick={() =>\r\n                        setCart((prev) =>\r\n                          prev.map((x) =>\r\n                            x.productId === i.productId\r\n                              ? { ...x, qty: x.qty + 1 }\r\n                              : x\r\n                          )\r\n                        )\r\n                      }\r\n                    >\r\n                      +\r\n                    </Button>\r\n\r\n                    <Button\r\n                      variant=\"destructive\"\r\n                      onClick={() =>\r\n                        setCart((prev) =>\r\n                          prev.filter((x) => x.productId !== i.productId)\r\n                        )\r\n                      }\r\n                    >\r\n                      ลบ\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n\r\n              {cart.length === 0 && (\r\n                <div className=\"rounded-xl border bg-white p-6 text-center text-sm text-slate-500\">\r\n                  ยังไม่มีสินค้าในตะกร้า\r\n                </div>\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* RIGHT */}\r\n        <Card className=\"rounded-2xl\">\r\n          <CardContent className=\"space-y-3 p-4\">\r\n            <div className=\"text-sm font-semibold\">สรุปยอด</div>\r\n\r\n            <div className=\"rounded-xl border bg-white p-4 text-sm\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-slate-500\">Subtotal</span>\r\n                <span className=\"font-semibold\">{subtotal}</span>\r\n              </div>\r\n\r\n              <div className=\"mt-2 flex items-center justify-between gap-3\">\r\n                <span className=\"text-slate-500\">ส่วนลด</span>\r\n                <Input\r\n                  type=\"number\"\r\n                  value={discount}\r\n                  onChange={(e) => setDiscount(Number(e.target.value))}\r\n                  className=\"w-40\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"mt-3 flex justify-between text-base\">\r\n                <span className=\"font-semibold\">Total</span>\r\n                <span className=\"text-lg font-bold\">{total}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-sm font-semibold\">วิธีชำระ</div>\r\n            <select\r\n              className=\"h-10 w-full rounded-xl border bg-white px-3 text-sm\"\r\n              value={paymentType}\r\n              onChange={(e) => setPaymentType(e.target.value as any)}\r\n            >\r\n              <option value=\"cash\">เงินสด</option>\r\n              <option value=\"promptpay\">PromptPay</option>\r\n            </select>\r\n\r\n            {/* ✅ QR PromptPay */}\r\n            {paymentType === \"promptpay\" && (\r\n              <div className=\"rounded-2xl border bg-white p-4\">\r\n                <div className=\"text-sm font-semibold\">\r\n                  สแกนเพื่อชำระเงิน (PromptPay)\r\n                </div>\r\n                <div className=\"mt-2 text-xs text-slate-500\">\r\n                  กรุณาสแกน QR แล้วกด “ชำระเงิน / ออกบิล”\r\n                </div>\r\n\r\n                <div className=\"mt-3 flex justify-center\">\r\n                  <div className=\"relative h-60 w-60 overflow-hidden rounded-2xl border bg-white\">\r\n                    <Image\r\n                      src=\"/qr-promptpay.png\"\r\n                      alt=\"PromptPay QR\"\r\n                      fill\r\n                      className=\"object-contain p-3\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <Button\r\n              className=\"w-full rounded-xl\"\r\n              disabled={cart.length === 0}\r\n              onClick={checkout}\r\n            >\r\n              ชำระเงิน / ออกบิล\r\n            </Button>\r\n\r\n            <Button\r\n              variant=\"secondary\"\r\n              className=\"w-full rounded-xl\"\r\n              onClick={() => {\r\n                setCart([]);\r\n                setDiscount(0);\r\n              }}\r\n            >\r\n              ล้างตะกร้า\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}